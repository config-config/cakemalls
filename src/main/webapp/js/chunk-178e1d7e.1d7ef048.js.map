{"version":3,"sources":["webpack:///./src/components/common/navbar/NavBar.vue?bf67","webpack:///./src/network/user.js","webpack:///./src/view/uploadimg/UpdloadImg.vue?d18a","webpack:///src/view/uploadimg/UpdloadImg.vue","webpack:///./src/view/uploadimg/UpdloadImg.vue?e19f","webpack:///./src/view/uploadimg/UpdloadImg.vue","webpack:///./src/components/common/navbar/NavBar.vue?4083","webpack:///src/components/common/navbar/NavBar.vue","webpack:///./src/components/common/navbar/NavBar.vue?d92d","webpack:///./src/components/common/navbar/NavBar.vue","webpack:///./src/view/uploadimg/UpdloadImg.vue?c4ae"],"names":["userLogin","uname","upassword","request","url","method","data","getUsersInfo","uid","userRegist","uemail","getShoppingById","updUpassword","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","backClick","slot","_v","directives","name","rawName","value","expression","domProps","$event","target","composing","getUserInfo","fileChange","updImg","ref","ifload","staticRenderFns","component","_t"],"mappings":"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","file":"js/chunk-178e1d7e.1d7ef048.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavBar.vue?vue&type=style&index=0&id=5c2b201d&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavBar.vue?vue&type=style&index=0&id=5c2b201d&scoped=true&lang=css&\"","import {request} from './request'\r\n\r\n// export function userLogin() {\r\n//   return request({\r\n//     url: '/getAllUsers.do',\r\n//     method: 'post'\r\n//   })\r\n// }\r\n\r\n//用户登录\r\nexport function userLogin(uname, upassword) { \r\n  return request({\r\n    url: '/userLogin.do',\r\n    method: 'post',\r\n    data: {\r\n     uname,\r\n     upassword\r\n    }\r\n  });\r\n}\r\n\r\n//根据用户id获取用户信息\r\nexport function getUsersInfo(uid) {\r\n  return request({\r\n    url: 'userInfo.do',\r\n    method: 'post',\r\n    data: {\r\n      uid\r\n    }\r\n  })\r\n}\r\n//用户注册\r\nexport function userRegist(uname, upassword,uemail) {\r\n  return request({\r\n    url: 'userRegist.do',\r\n    method: 'post',\r\n    data: {\r\n      uname,\r\n      upassword,\r\n      uemail\r\n    }\r\n  })\r\n}\r\n//通过id获取购物车商品的信息\r\nexport function getShoppingById(uid) {\r\n  return request({\r\n    url: 'getShoppingById.do',\r\n    method: 'post',\r\n    data: {\r\n      uid\r\n    }\r\n  })\r\n}\r\n//修改密码\r\nexport function updUpassword(uid,upassword,uemail) {//uemail指用户输入的旧密码\r\n  return request({\r\n    url: 'updUpassword.do',\r\n    method: 'post',\r\n    data: {\r\n      uid,upassword,uemail\r\n    }\r\n  })\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('nav-bar',{staticClass:\"nav-barl\"},[_c('div',{staticClass:\"nav-left\",attrs:{\"slot\":\"left\"},on:{\"click\":_vm.backClick},slot:\"left\"},[_c('img',{attrs:{\"src\":require(\"assets/img/back.svg\"),\"alt\":\"\"}})]),_c('div',{staticClass:\"nav-titles\",attrs:{\"slot\":\"center\"},slot:\"center\"},[_vm._v(\"上传头像\")])]),_c('form',{staticClass:\"ff\",attrs:{\"action\":\"http://localhost:8088/cakemall/updUserimg.do\",\"enctype\":\"multipart/form-data\",\"method\":\"post\",\"target\":\"ifr\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.getUserInfo),expression:\"getUserInfo\"},{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],attrs:{\"type\":\"text\",\"name\":\"uid\"},domProps:{\"value\":(_vm.getUserInfo)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.getUserInfo=$event.target.value}}}),_c('input',{attrs:{\"type\":\"file\",\"name\":\"file\",\"id\":\"files\"},on:{\"change\":_vm.fileChange}}),_c('img',{staticClass:\"images\",attrs:{\"src\":_vm.updImg,\"alt\":\"\"}}),_c('input',{staticClass:\"fbut\",attrs:{\"type\":\"submit\",\"value\":\"上传图片\"}})]),_c('iframe',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],ref:\"iframe\",attrs:{\"name\":\"ifr\",\"id\":\"ifr\"},on:{\"load\":_vm.ifload}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <nav-bar class=\"nav-barl\">\r\n      <div slot=\"left\" class=\"nav-left\" @click=\"backClick\">\r\n        <img src=\"~assets/img/back.svg\" alt=\"\">\r\n      </div>\r\n      <div slot=\"center\" class=\"nav-titles\">上传头像</div>\r\n    </nav-bar>\r\n\r\n    <form action=\"http://localhost:8088/cakemall/updUserimg.do\" enctype=\"multipart/form-data\" method=\"post\" target=\"ifr\" class=\"ff\">\r\n        <input type=\"text\" name=\"uid\" v-model=\"getUserInfo\" v-show=\"false\"/>\r\n        <input type=\"file\" name=\"file\" id=\"files\" @change=\"fileChange\"/>\r\n        <img :src=\"updImg\" alt=\"\" class=\"images\">\r\n        <input type=\"submit\" value=\"上传图片\" class=\"fbut\"/>\r\n    </form>\r\n    <iframe name=\"ifr\" id=\"ifr\" @load=\"ifload\" v-show=\"false\" ref=\"iframe\"></iframe>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import NavBar from 'common/navbar/NavBar'\r\n  import {getUsersInfo} from 'network/user'\r\n  export default {\r\n    name: 'UpdloadImg',\r\n    components: {\r\n      NavBar\r\n    },\r\n    data () {\r\n      return {\r\n        //保存图片信息\r\n         updImg: '',\r\n         iframeData: null,\r\n         first: null  //iframe第一次加载\r\n      }\r\n    },\r\n    computed: {\r\n      //获取用户信息\r\n      getUserInfo() {\r\n        return this.$store.state.userInfo.uid\r\n      }\r\n    },\r\n    methods: {\r\n      backClick() {\r\n        this.$router.back()\r\n      },\r\n      fileChange() {\r\n        //将文件的内容显示在页面上\r\n        var file =document.getElementById(\"files\");\r\n        this.updImg = window.URL.createObjectURL(file.files[0]);\r\n      },\r\n      ifload() {\r\n        //页面加载时也会调用一次\r\n        if(this.first == null) {\r\n          this.first = 1\r\n        }else {\r\n          // const obj1 = window.frames['ifr']\r\n          // console.log(this.$refs.iframe.contentWindow)\r\n           // iframe的对象\r\n          // console.log(this.$refs.iframe)\r\n          // iframe的window对象\r\n          // console.log(this.$refs.iframe.contentWindow)\r\n          //获取iframe的返回值\r\n          //  var doc = document.getElementById(\"ifr\").contentDocument;\r\n          // var doc = window.frames[\"ifr\"].document;\r\n          // console.log(doc.body.innerHTML)\r\n          // var b = doc.html.body;\r\n          // console.log(obj1)\r\n          // console.log(1)\r\n          //修改图片\r\n\r\n          //返回\r\n          //重新获取用户信息\r\n          getUsersInfo(this.getUserInfo).then(res => {\r\n            //将用户信息重新赋值\r\n            const userInfo = res;\r\n                this.$store.dispatch('addUserInfo', userInfo).then(res => {\r\n                   //跳转到登录注册页面\r\n                  this.$toast.show(\"修改成功\")\r\n                  this.$router.push('/profile')\r\n                })\r\n          })\r\n        }\r\n       \r\n\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .nav-barl{\r\n    background-color: #ff8198;\r\n    color: white;\r\n  }\r\n  .nav-left{\r\n    margin-top: 5px;\r\n  }\r\n  .ff{\r\n    margin: auto;\r\n  }\r\n  .images{\r\n    height: 200px;\r\n    width: 200px;\r\n    display: block;\r\n    margin: auto;\r\n    margin-top: 30px;\r\n    background-color: snow;\r\n  }\r\n  #files{\r\n    display: block;\r\n    margin: auto;\r\n    margin-top: 30px;\r\n  }\r\n  .fbut{\r\n    display: block;\r\n    background-color: forestgreen;\r\n    height: 30px;\r\n    width: 80px;\r\n    margin: auto;\r\n    margin-top: 30px;\r\n    font-size: 16px;\r\n    line-height: 25px;\r\n    border-radius: 30px;\r\n  }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdloadImg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdloadImg.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UpdloadImg.vue?vue&type=template&id=1cd0f010&scoped=true&\"\nimport script from \"./UpdloadImg.vue?vue&type=script&lang=js&\"\nexport * from \"./UpdloadImg.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UpdloadImg.vue?vue&type=style&index=0&id=1cd0f010&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1cd0f010\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"nav-bar\"},[_c('div',{staticClass:\"left\"},[_vm._t(\"left\")],2),_c('div',{staticClass:\"center\"},[_vm._t(\"center\")],2),_c('div',{staticClass:\"right\"},[_vm._t(\"right\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"nav-bar\">\r\n    <div class=\"left\">\r\n      <slot name=\"left\"></slot>\r\n    </div>\r\n    <div class=\"center\">\r\n      <slot name=\"center\"></slot>\r\n    </div>\r\n    <div class=\"right\">\r\n      <slot name=\"right\"></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: 'NavBar'\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .nav-bar{\r\n    display: flex;\r\n    height: 44px;\r\n    line-height: 44px;\r\n    text-align: center;\r\n    border-bottom: #eee;\r\n    box-shadow: 0px 1px 1px rgba(150, 150, 150, 0.8);\r\n  }\r\n  .left, .right{\r\n    width: 60px;\r\n  }\r\n  .center{\r\n    flex:1;\r\n  }\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NavBar.vue?vue&type=template&id=5c2b201d&scoped=true&\"\nimport script from \"./NavBar.vue?vue&type=script&lang=js&\"\nexport * from \"./NavBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NavBar.vue?vue&type=style&index=0&id=5c2b201d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5c2b201d\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdloadImg.vue?vue&type=style&index=0&id=1cd0f010&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdloadImg.vue?vue&type=style&index=0&id=1cd0f010&scoped=true&lang=css&\""],"sourceRoot":""}